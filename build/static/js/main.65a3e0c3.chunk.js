(this["webpackJsonpredditlike-clone-frontend"]=this["webpackJsonpredditlike-clone-frontend"]||[]).push([[0],{31:function(e,t,a){e.exports=a.p+"static/media/corazon.a8cd76c1.svg"},33:function(e,t,a){e.exports=a(62)},38:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),c=a.n(o),l=(a(38),a(32)),s=a(1),u=a.n(s),i=a(2),m=a(3),p=a(7),d=a(4),b=a(6),f=a.n(b),g="https://desolate-anchorage-55331.herokuapp.com/api/posts/",h=null,x=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("https://api.imgbb.com/1/upload?expiration=600&key=fb223360f4f362805066a7186f4b1056",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(g,t,{headers:{Authorization:h}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete(g+t,{headers:{Authorization:h}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put(g+t,a,{headers:{Authorization:h}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),y=function(){var e=Object(i.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("https://desolate-anchorage-55331.herokuapp.com/api/posts/likes/"+t,a,{headers:{Authorization:h}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),k={getAll:function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(g);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(g+t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createPost:v,deletePost:w,update:E,likeAPost:y,imageUpload:x,setToken:function(e){h="bearer ".concat(e)}},O=function(e){var t=e.className,a=e.message;return null==a?null:r.a.createElement("div",{className:t},a)},N={login:function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("https://desolate-anchorage-55331.herokuapp.com/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(m.a)(c,2),s=l[0],p=l[1],b=Object(n.useState)(null),f=Object(m.a)(b,2),g=f[0],h=f[1],x=Object(n.useState)(!1),v=Object(m.a)(x,2),w=v[0],E=v[1],y=function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,N.login({username:a,password:s});case 4:n=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(n)),o(""),p(""),E(!0),window.location.reload(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),h("Wrong user or password"),setTimeout((function(){h(null)}),3e3);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"max-w-sm rounded overflow-hidden shadow hover:shadow-xl flex flex-col container mx-auto py-3 mt-4 mb-5 bg-indigo-100"},r.a.createElement("form",{className:"rounded px-8 pt-6 pb-8 mb-4",onSubmit:y},r.a.createElement("h1",{className:"font-bold py-4 text-xl p2"},"Login"),w?r.a.createElement(d.a,{to:"/"}):null,r.a.createElement(O,{message:g,className:"bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-2"}),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2 pt-2",htmlFor:"username"},"Username"),r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"username",type:"text",placeholder:"Username",name:"username",onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",name:"password",onChange:function(e){var t=e.target;return p(t.value)}})),r.a.createElement("div",{className:"flex items-center justify-between"},r.a.createElement("button",{className:"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit"},"Log in"))))},S={register:function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("https://desolate-anchorage-55331.herokuapp.com/api/users/",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(m.a)(c,2),s=l[0],p=l[1],b=Object(n.useState)(null),f=Object(m.a)(b,2),g=f[0],h=f[1],x=Object(n.useState)(!1),v=Object(m.a)(x,2),w=v[0],E=v[1],y=function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,S.register({username:a,password:s});case 4:n=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(n)),o(""),p(""),E(!0),window.location.reload(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),h("Username and password should be at least 4 characters long!"),setTimeout((function(){h(null)}),3e3);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"max-w-sm rounded overflow-hidden shadow hover:shadow-xl flex flex-col container mx-auto py-3 mt-4 mb-5 bg-indigo-100"},r.a.createElement("form",{className:"rounded px-8 pt-6 pb-8 mb-4",onSubmit:y},r.a.createElement("h1",{className:"font-bold py-4 text-xl"},"Register"),w?r.a.createElement(d.a,{to:"/"}):null,r.a.createElement(O,{message:g,className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 mb-2 rounded relative"}),r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"username"},"Username"),r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"username",type:"text",placeholder:"Username",name:"username",onChange:function(e){var t=e.target;return o(t.value)}})),r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"******************",name:"password",onChange:function(e){var t=e.target;return p(t.value)}})),r.a.createElement("div",{className:"flex items-center justify-between"},r.a.createElement("button",{className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit"},"Sign In"))))},A=a(31),U=a.n(A),I=function(e){var t=e.post,a=Object(n.useState)(0),o=Object(m.a)(a,2),c=o[0],l=o[1];Object(n.useEffect)((function(){l(t.likes)}),[t]);var s=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.getOne(t);case 3:return++(a=e.sent).likes,e.next=7,k.likeAPost(t,a);case 7:l(a.likes),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"content-between"},r.a.createElement("button",{onClick:s.bind(void 0,t.id),className:"bg-transparent hover:bg-red-500 text-red-700 font-semibold hover:text-white py-1 px-2 border border-red-500 hover:border-transparent rounded"},r.a.createElement("img",{className:"w-6",src:U.a,alt:"Heart from like button"}),r.a.createElement("span",null,c)))},P=function(e){var t=e.onSubmitNew,a=e.onSubmitUpdate,n=e.isUpdate,o=e.newCommentValue,c=e.commentUpdateValue,l=e.setMessage,s=e.setMessageToUpdate;return n?r.a.createElement("form",{className:"m-2",onSubmit:a},r.a.createElement("input",{className:"bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none leading-normal",type:"text",name:"message",value:c,onChange:function(e){var t=e.target;return s(t.value)}})):r.a.createElement("form",{className:"m-2",onSubmit:t},r.a.createElement("input",{className:"bg-white focus:outline-none focus:shadow-outline border border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none leading-normal",type:"text",placeholder:"Add comment",name:"message",value:o,onChange:function(e){var t=e.target;return l(t.value)}}))},T="https://desolate-anchorage-55331.herokuapp.com/api/replies/",F=null,z=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(T+t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D={setToken:function(e){F="bearer ".concat(e)},newComment:function(){var e=Object(i.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(T+t,a,{headers:{Authorization:F}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),deleteComment:function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete(T+t,{headers:{Authorization:F}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(i.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put(T+t,a,{headers:{Authorization:F}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getAll:z},J=function(e){var t=e.id,a=Object(n.useState)([]),o=Object(m.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(""),p=Object(m.a)(s,2),d=p[0],b=p[1],f=Object(n.useState)(null),g=Object(m.a)(f,2),h=g[0],x=g[1],v=Object(n.useState)(null),w=Object(m.a)(v,2),E=w[0],y=w[1],k=Object(n.useState)(null),N=Object(m.a)(k,2),j=N[0],S=N[1],C=Object(n.useState)(null),A=Object(m.a)(C,2),U=A[0],I=A[1],T=Object(n.useState)(!1),F=Object(m.a)(T,2),z=F[0],J=F[1],M=t;Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);y(t),D.setToken(t.token)}}),[]),Object(n.useEffect)((function(){var e=new AbortController;return function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.getAll(M);case 3:t=e.sent,l(t),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()(),function(){return e.abort()}}),[M]);var L=function(){var e=Object(i.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,!(""===(n={message:d,author:E.username}).message||n.message.length<4)){e.next=9;break}return x("Comment needs to be at least 4 character long"),setTimeout((function(){x(null)}),3e3),e.abrupt("return");case 9:return e.next=11,D.newComment(t,n);case 11:r=e.sent,b(" "),l(c.concat(r));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),x("Something went wrong"),setTimeout((function(){x(null)}),3e3);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,D.update(U.id,{message:j});case 4:return e.t0=l,e.next=7,D.getAll(M);case 7:e.t1=e.sent,(0,e.t0)(e.t1),J(!1),e.next=15;break;case 12:e.prev=12,e.t2=e.catch(1),console.log(e.t2);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!window.confirm("Do you really want to delete this comment?")){e.next=10;break}return e.next=5,D.deleteComment(t);case 5:return e.t0=l,e.next=8,D.getAll(M);case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:return e.abrupt("return");case 13:e.prev=13,e.t2=e.catch(0),console.error(e.t2);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){if(z)return J(!1);J(!0),I(e),S(e.message)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"px-4 divide-y divide-gray-400 list-none"},c.map((function(e,t){return r.a.createElement("li",{key:t,className:"bg-indigo-100 font-light text-gray-700 py-2 break-words"},e.message," - ",r.a.createElement("span",{className:"font-bold"},e.author)," ",function(e){var t=JSON.parse(window.localStorage.getItem("loggedUser"));return E?t.username!==e.author?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"px-6 text-sm"},r.a.createElement("span",{className:"hover:text-indigo-300 hover:border-indigo-600 border-b border-gray-600 mx-2",onClick:H.bind(void 0,e.id)},"Delete"),r.a.createElement("span",{className:"hover:text-indigo-300 hover:border-indigo-600 border-b border-gray-600",onClick:B.bind(void 0,e)},"Edit"))):null}(e))}))),r.a.createElement(O,{message:h,className:"bg-orange-100 border-l-4 border-orange-500 text-orange-700 p-2"}),r.a.createElement(P,{isUpdate:z,onSubmitNew:L,onSubmitUpdate:V,newCommentValue:d,commentUpdateValue:j,setMessage:b,setMessageToUpdate:S}))},M=function(e){var t=e.allPosts,a=e.deletedPost,o=e.success,c=Object(n.useState)(null),l=Object(m.a)(c,2),s=l[0],d=l[1],b=a;Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);d(t),k.setToken(t.token)}}),[]);var f=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to delete this post?")){e.next=11;break}return e.t0=Promise,e.next=5,k.deletePost(t);case 5:return e.t1=e.sent,e.next=8,b();case 8:e.t2=e.sent,e.t0.all.call(e.t0,e.t1,e.t2)&&o("Post has been deleted.","flex items-center bg-green-500 text-white text-sm font-bold px-4 py-3 mx-24 rounded");case 11:return e.abrupt("return");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t.map((function(e){return r.a.createElement("div",{key:e.id,className:"max-w-sm rounded overflow-hidden shadow hover:shadow-xl flex flex-col container mx-auto py-3 px-4 mt-4 mb-5 bg-indigo-100"},r.a.createElement("h2",{className:"text-3xl px-2 py-2 font-bold"},e.title),function(e){return void 0===e.postImage?r.a.createElement("br",null):r.a.createElement("img",{src:e.postImage,className:"px-2 object-cover mb-5",alt:"Post thumbnail"})}(e),r.a.createElement("p",{className:"font-bold text-purple-500 text-xl-mb-2 px-5"},"Author: ",e.author),r.a.createElement("p",{className:"py-3 px-5 break-words"},e.content),r.a.createElement("div",{className:"flex items-end m-3"},r.a.createElement(I,{post:e}),function(e){var t=JSON.parse(window.localStorage.getItem("loggedUser"));return s?t.username!==e.author?null:r.a.createElement("div",{className:"ml-auto"},r.a.createElement("button",{className:"inline-block bg-red-200 rounded-full px-3 py-1 mr-2 text-sm font-semibold text-red-700 ",onClick:f.bind(void 0,e.id)},"Delete"),r.a.createElement(p.b,{to:"/edit/"+e.id},r.a.createElement("button",{className:"inline-block bg-blue-200 rounded-full px-3 py-1 text-sm font-semibold text-blue-700 "},"Edit"))):null}(e)),r.a.createElement("div",null,r.a.createElement("h3",{className:"text-2xl font-bold px-4 "},"Comments"),function(e,t){return s?r.a.createElement(J,{id:e}):t.replies?t.replies.map((function(e,t){return r.a.createElement("ul",{key:t,className:"px-4 divide-y divide-gray-400"},r.a.createElement("li",{key:e.id,className:"bg-indigo-100 font-light text-gray-700 py-2"},e.message," - ",r.a.createElement("span",{className:"font-bold"},e.author)))})):void 0}(e.id,e)))}))},L=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],c=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAll();case 2:t=e.sent,o(t.reverse());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){c()}),[]);var l=a.sort((function(e,t){return e.likes<t.likes?1:e.likes>t.likes?-1:0}));return l.map((function(e,t){return r.a.createElement("div",{key:t,className:"max-w-sm rounded overflow-hidden shadow hover:shadow-xl flex flex-col container mx-auto py-3 px-4 mt-4 mb-5 bg-indigo-100"},r.a.createElement("h1",{className:"text-2xl px-2 py-2 font-bold"},e.title),function(e){return void 0===e.postImage?r.a.createElement("br",null):r.a.createElement("img",{src:e.postImage,className:"px-2 object-cover mb-5",alt:"Post thumbnail"})}(e),r.a.createElement("p",{className:"font-bold text-purple-500 text-xl-mb-2 px-5"},"Posted by: ",e.author),r.a.createElement("p",{className:"font-bold text-red-500 text-xl-mb-2 px-5"},"Likes: ",e.likes),r.a.createElement("p",{className:"py-3 px-5 break-words"},e.content),r.a.createElement(p.b,{to:"/post/"+e.id,className:"font-bold bg-indigo-200 hover:bg-indigo-400 text-center"},r.a.createElement("button",null,"Go to this post")))}))},V=function(){window.localStorage.removeItem("loggedUser"),window.location.reload()},H=function(e){var t=e.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"lg:p-4 py-3 px-0 block border-b-2 border-transparent"},"Hello, ",r.a.createElement("strong",null,t.username),"!"),r.a.createElement("li",{className:"lg:p-4 py-3 px-0 block border-b-2 border-transparent hover:border-indigo-500",onClick:V},"Log Out"))},B=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement(p.b,{className:"lg:p-4 py-3 px-0 block border-b-2 border-transparent hover:border-indigo-500",to:"/register"},"Register")),r.a.createElement("li",null,r.a.createElement(p.b,{className:"lg:p-4 py-3 px-0 block border-b-2 border-transparent hover:border-indigo-500",to:"/login"},"Login")))},R=function(e){var t=e.isLogin,a=e.username;return t?r.a.createElement(H,{user:a}):r.a.createElement(B,null)},W=function(){var e=JSON.parse(window.localStorage.getItem("loggedUser"));return r.a.createElement("nav",{className:"lg:px-16 px-6 bg-white flex flex-wrap items-center lg:py-0 py-2 shadow-lg"},r.a.createElement("div",{className:"flex-1 flex justify-between items-center"},r.a.createElement("a",{href:"/"},r.a.createElement("svg",{width:"32",height:"36",viewBox:"0 0 32 36",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M15.922 35.798c-.946 0-1.852-.228-2.549-.638l-10.825-6.379c-1.428-.843-2.549-2.82-2.549-4.501v-12.762c0-1.681 1.12-3.663 2.549-4.501l10.825-6.379c.696-.41 1.602-.638 2.549-.638.946 0 1.852.228 2.549.638l10.825 6.379c1.428.843 2.549 2.82 2.549 4.501v12.762c0 1.681-1.12 3.663-2.549 4.501l-10.825 6.379c-.696.41-1.602.638-2.549.638zm0-33.474c-.545 0-1.058.118-1.406.323l-10.825 6.383c-.737.433-1.406 1.617-1.406 2.488v12.762c0 .866.67 2.05 1.406 2.488l10.825 6.379c.348.205.862.323 1.406.323.545 0 1.058-.118 1.406-.323l10.825-6.383c.737-.433 1.406-1.617 1.406-2.488v-12.757c0-.866-.67-2.05-1.406-2.488l-10.825-6.379c-.348-.21-.862-.328-1.406-.328zM26.024 13.104l-7.205 13.258-3.053-5.777-3.071 5.777-7.187-13.258h4.343l2.803 5.189 3.107-5.832 3.089 5.832 2.821-5.189h4.352z"})))),r.a.createElement("label",{htmlFor:"menu-toggle",className:"pointer-cursor lg:hidden block"},r.a.createElement("svg",{className:"fill-current text-gray-900",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},r.a.createElement("title",null,"menu"),r.a.createElement("path",{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"}))),r.a.createElement("input",{className:"hidden",type:"checkbox",id:"menu-toggle"}),r.a.createElement("div",{className:"hidden lg:flex lg:items-center lg:w-auto w-full",id:"menu"},r.a.createElement("nav",null,r.a.createElement("ul",{className:"lg:flex items-center justify-between text-base text-gray-700 pt-4 lg:pt-0"},r.a.createElement("li",null,r.a.createElement(p.b,{className:"lg:p-4 py-3 px-0 block border-b-2 border-transparent hover:border-indigo-500 lg:mb-0 mb-2",to:"/mostliked"},"Most Liked")),r.a.createElement("li",null,r.a.createElement(p.b,{className:"lg:p-4 py-3 px-0 block border-b-2 border-transparent hover:border-indigo-500 lg:mb-0 mb-2",to:"/"},"Feed")),r.a.createElement(R,{isLogin:null!==e,username:e})))))},G=function(){return r.a.createElement("div",null,r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{margin:"auto",background:"none",display:"block",shapeRendering:"auto"},width:"231px",height:"151px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},r.a.createElement("circle",{cx:"50",cy:"50",fill:"none",stroke:"#93dbe9",strokeWidth:"7",r:"28",strokeDasharray:"131.94689145077132 45.982297150257104",transform:"rotate(201.962 50 50)"},r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1.0416666666666665s",values:"0 50 50;360 50 50",keyTimes:"0;1"}))))},Y=function(){return r.a.createElement("div",null,r.a.createElement(G,null))},_=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],o=t[1];return[a?r.a.createElement(Y,null):null,function(){return o(!0)},function(){return o(!1)}]},q=function(e){var t=e.allPosts,a=Object(n.useState)(null),o=Object(m.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(""),p=Object(m.a)(s,2),d=p[0],b=p[1],f=Object(n.useState)(""),g=Object(m.a)(f,2),h=g[0],x=g[1],v=Object(n.useState)(null),w=Object(m.a)(v,2),E=w[0],y=w[1],O=_(),N=Object(m.a)(O,3),j=N[0],S=N[1],C=N[2];Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);l(t),k.setToken(t.token)}}),[]);var A=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FormData).append("image",t),e.next=5,k.imageUpload(a);case 5:n=e.sent,y(n.data.display_url),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),S(),e.next=4,A(t.target.files[0]);case 4:setTimeout((function(){C()}),2e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={title:d,content:h,postImage:E},e.next=5,k.createPost(n);case 5:r=e.sent,b(""),x(""),t(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return c?r.a.createElement("div",{className:"mb-12 mt-5 max-w-sm mx-auto md:max-w-lg lg:max-w-3xl"},r.a.createElement("form",{className:"bg-white shadow-md rounded px-16 pt-6 pb-8 mb-4",onSubmit:I},r.a.createElement("div",{className:"mb-4"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title"},"Title"),r.a.createElement("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"title",type:"text",placeholder:"Title",value:d,onChange:function(e){var t=e.target;return b(t.value)}})),r.a.createElement("div",{className:"mb-6"},r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"content"},"Content"),r.a.createElement("textarea",{className:"resize-none border w-full h-20 rounded focus:outline-none focus:shadow-outline py-2 px-3",id:"content",type:"text",placeholder:"Content",value:h,onChange:function(e){var t=e.target;return x(t.value)}})),r.a.createElement("div",{className:"flex w-full h-auto items-center justify-center bg-grey-lighter"},r.a.createElement("label",{className:"flex flex-col items-center px-4 py-2 bg-white text-blue-500 rounded-lg shadow-lg tracking-wide uppercase border border-blue-100 cursor-pointer hover:bg-blue-500 hover:text-white"},r.a.createElement("svg",{className:"w-8 h-8",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},r.a.createElement("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})),r.a.createElement("span",{className:"mt-2 text-base leading-normal"},"Select a file"),r.a.createElement("input",{type:"file",className:"hidden",accept:"image/*",onChange:U}))),j,r.a.createElement("div",{className:"flex items-center justify-center mt-8"},r.a.createElement("button",{className:"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"submit"},"Submit post")))):null},K=function(e){var t=e.updateFeed,a=Object(n.useState)([]),o=Object(m.a)(a,2),c=o[0],l=o[1],s=Object(d.h)().id,b=Object(n.useState)(null),f=Object(m.a)(b,2),g=f[0],h=f[1],x=Object(d.g)(),v=function(){var e=Object(i.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAll();case 2:a=e.sent,t(a.reverse());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=new AbortController;return function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getOne(s);case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return e.abort()}}),[s]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);h(t),k.setToken(t.token)}}),[]);var w=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to delete this post?")){e.next=6;break}return e.next=4,k.deletePost(t);case 4:return v(),e.abrupt("return",x.push("/"));case 6:return e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"max-w-sm rounded overflow-hidden shadow hover:shadow-xl flex flex-col container mx-auto py-3 px-4 mt-4 mb-5 bg-indigo-100"},r.a.createElement("h2",{className:"text-3xl px-2 py-2 font-bold"},c.title),void 0===c.postImage?r.a.createElement("br",null):r.a.createElement("img",{src:c.postImage,className:"px-2 object-cover mb-5",alt:"Post thumbnail"}),r.a.createElement("p",{className:"font-bold text-purple-500 text-xl-mb-2 px-5"},"Author: ",c.author),r.a.createElement("p",{className:"py-3 px-5 break-words"},c.content),r.a.createElement("div",{className:"flex items-end m-3"},r.a.createElement(I,{post:c}),function(){var e=JSON.parse(window.localStorage.getItem("loggedUser"));return g?e.username!==c.author?null:r.a.createElement("div",{className:"ml-auto"},r.a.createElement("button",{className:"inline-block bg-red-200 rounded-full px-3 py-1 mr-2 text-sm font-semibold text-red-700 ",onClick:w.bind(void 0,c.id)},"Delete"),r.a.createElement(p.b,{to:"/edit/"+c.id},r.a.createElement("button",{className:"inline-block bg-blue-200 rounded-full px-3 py-1 text-sm font-semibold text-blue-700 "},"Edit"))):null}()),r.a.createElement("div",null,r.a.createElement("h3",{className:"text-2xl font-bold px-4 "},"Comments"),g?c.replies?r.a.createElement(J,{id:c.id}):r.a.createElement("br",null):c.replies?c.replies.map((function(e,t){return r.a.createElement("ul",{key:t,className:"px-4 divide-y divide-gray-400"},r.a.createElement("li",{key:e.id,className:"bg-indigo-100 font-light text-gray-700 py-2"},e.message," - ",r.a.createElement("span",{className:"font-bold"},e.author)))})):void 0))},Q=function(e){var t=e.updateFeed,a=Object(n.useState)([]),o=Object(m.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(""),p=Object(m.a)(s,2),b=p[0],f=p[1],g=Object(n.useState)(""),h=Object(m.a)(g,2),x=h[0],v=h[1],w=Object(n.useState)(null),E=Object(m.a)(w,2),y=E[0],N=E[1],j=Object(d.g)(),S=Object(d.h)().id,C=function(){var e=Object(i.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAll();case 2:a=e.sent,t(a.reverse());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,a={title:x,content:b},e.next=5,k.update(S,a);case 5:C(),j.push("/"),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0),N("Add some content to the post! (4 characters min.)"),setTimeout((function(){N(null)}),3e3);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);k.setToken(t.token)}}),[]),Object(n.useEffect)((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.getOne(S);case 3:delete(t=e.sent).postImage,delete t.replies,l(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[S]),r.a.createElement("form",{onSubmit:A},r.a.createElement("div",{className:"max-w-sm rounded overflow-hidden shadow hover:shadow-xl flex flex-col container mx-auto py-3 px-4 mt-4 mb-5 bg-indigo-100"},r.a.createElement(O,{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",message:y}),r.a.createElement("h1",{className:"text-xl px-2 py-3 font-bold"},'Edit the post called "',c.title,'"'),r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2 pt-2",htmlFor:"title"},"Title:"),r.a.createElement("input",{className:"text-3xl px-2 font-bold",placeholder:c.title,value:x,onChange:function(e){var t=e.target;return v(t.value)}}),r.a.createElement("label",{className:"block text-gray-700 text-sm font-bold mb-2 pt-2",htmlFor:"content"},"Content:"),r.a.createElement("textarea",{className:"resize-none border w-full h-20 rounded focus:outline-none focus:shadow-outline py-2 px-3",id:"content",type:"text",placeholder:c.content,value:b,onChange:function(e){var t=e.target;return f(t.value)}}),r.a.createElement("button",{className:"bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline my-3",type:"submit"},"Submit post")))},X=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(m.a)(c,2),b=s[0],f=s[1],g=Object(n.useState)(null),h=Object(m.a)(g,2),x=h[0],v=h[1],w=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.getAll();case 3:t=e.sent,o(t.reverse()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(e){var t=[e].concat(Object(l.a)(a));o(t)},y=function(e,t){f(e),v(t),setTimeout((function(){f(null),v(null)}),3e3)};Object(n.useEffect)((function(){w()}),[]);return r.a.createElement(p.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(W,null),r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0,component:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(q,{allPosts:E}),r.a.createElement(O,{message:b,className:x}),r.a.createElement(M,{allPosts:a,deletedPost:w,success:y}))}}),r.a.createElement(d.b,{path:"/mostliked",component:function(){return r.a.createElement(L,{posts:a})}}),r.a.createElement(d.b,{path:"/post/:id",component:function(){return r.a.createElement(K,{updateFeed:o})}}),r.a.createElement(d.b,{path:"/edit/:id",component:function(){return r.a.createElement(Q,{updateFeed:o})}}),r.a.createElement(d.b,{path:"/login",component:j}),r.a.createElement(d.b,{path:"/register",component:C}))))};c.a.render(r.a.createElement(X,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.65a3e0c3.chunk.js.map